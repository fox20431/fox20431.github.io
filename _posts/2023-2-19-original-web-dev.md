# 原生前端开发

很好，摆烂了。

## 什么叫做原生前端开发

HTML 、 CSS 、 JavaScript 以及静态资源。

## 原生开发的意义

现在库（广义的库，包含框架）横行，数不胜数的库都经历着从开发、更新到最后破败……

### 优势

以长久的眼光来看，既然最终都会迎来灭亡，那库的存在的意义是什么？提高开发者体验（或者说偷懒🤔）。

不得不说，库的使用确实能提高开发者体验。

- React 允许在脚本文件中写标签，模块化再复用，确实能剩下不少力气；
- TypeScript 提供了强类型，某些编辑器（比如 Visual Studio Code ）通过类型提供智能提示，开发者可以通过类型了解类型信息；
- Babel 通过编译不同标准的脚本语言使得浏览器兼容，目的是让开发者可以使用不同标准的特性（通常这种特性提供会为开发者提供便利）；
- Webpack 将各种各样的资源整合，输出浏览器能识别的格式
- ……

### 劣势

但就目前来看前端的发展，各种库层出不穷，虽然部分库在前端有一定地位（比如 React 和 Vue ），但也存在一些问题：

- 学习成本，并不是学会了就永远不需要学习了，每次更新带来的新特性都需要了解；
- 承担库的BUG、漏洞以及恶意代码，比如faker.js 作者就发对开源白嫖而向项目注入恶意代码，当出现这个问题，大概率是很难自己解决的；
- 高层建筑的不确定性，库最终服务于 HTML 、 CSS 、 JavaScript 以及静态资源（因为浏览器只认识这些），所以高层可能由于底层的变动也被迫做出更大的举动；
- 依赖 Node.js；
- ……

### 权衡（tradeoff）

库使得开发者拥有好的开发体验，但存在许多潜在问题。如果你对库完全信任，认为其不存在任何BUG、漏洞以及恶意代码，而且文档全面社区活跃，或者说你对库特别了解能够手撕源码，以后底层改变了你也有足够精力重构的话，那么当我上面说的是废话。我自认为我没这个能力，库分散了我太多的精力，以至于没了解到的特性在我手里会被当作 BUG 从而不同程度的影响我的开发。

你可以认为我是缺乏安全的那种人或者有自虐倾向的人，我承认框架那一套确实能非常非常非常能提高开发效率，写的时候也能跟专注于业务代码。但框架是什么？是束缚，你的所有行为必须在它的规则下。如果不着急的话，我宁愿慢慢开发，而不是刚学完 JavaScript 对 JavaScript 特性都没了解清楚就去向上学，基本功要扎实。

现在互联网公司为了效率都是选择框架开发，我们也是为了面向交付开发，所以抛开自己的理想，就用框架吧。

但是如果我想自己开发项目，我想我肯定会尝试原生开发（HTML、CSS、JS）。

## 我选择原生的原因

### 起因

今天是2022年7月11日周一凌晨，周六周日突发奇想，学习 Go 。因为最近在看 C/C++ ，但又想做后端接口，想用 C/C++ 尝试去做，但考虑到指针我放弃了，因为虚拟机和库的原因没选择  Java ， Go 是运行在本机上的、拥有垃圾回收机制、直接提供 HTTP 库，符合我心中的想法，所以我选择 Go 。学习 Go 之前肯定要写前端，但是我想写一个简单的前端页面，我觉得 React 有点小题大做了。

### 经过

所以我尝试用 Webpack 写一个多页面的程序，但 Webpack 擅长写 SPA （ Single Page App ），多页面也能写，但遇到许许多多问题，首先是每次增加页面都要修改配置文件，修改配置文件就需要重启 Webpack 服务才能生效，这个我开始是使用了 nodemon （监听指定文件，当改变时执行指定命令）库解决了，但是发现在启动 dev server 时预期设定的 JavaScript 并不能编译到指定位置（ 将 JavaScript 构建到 pulic 指定目录， index.html 就引用构建的 js 文件）， 然后为编译就为配置文件增加了 watch 特性，build 过程会持续存在，每当文件修改会执行 build ，但我发现 dev server并不能 live reload （实时重载，也就是更改文件网页刷新），我查了许久没解决 ，即使解决了同时开始两个服务也让我十分不爽，最让我不爽的还是 webpack 使用的是 CommonJS 语法（不喜欢是因为不能算得上正统的标准），骨子里都留着 Node.js 的血。如果有了解 Node.js 历史的话，他的创造者说了 Node.js 的问题，为了解决这个问题他创造了一个叫做 Deno 工具（行吧，我算是一个都不想学了）。

### 放弃 Node.js，拥抱原生

所以我尝试摆脱 Webpack 工具，但离开打包工具，写出的 JavaScript 就不能够正确的引入 npm 的库文件，因此又了解到 ESBuild 、 rollup 等等，经历一番折腾我算是看清楚了，但凡涉及到 package.json 文件的项目，都是基于 node.js 的项目。因此我做出尝试：放弃 Node.js ，拥抱原生。写一个只依靠浏览器就能运行的项目，我喜欢这种纯粹的感受。

## 选择原生开发效率怎么样

如果下面这些特性有解决方案，放弃 Node.js 也不是不行：

- 库
- 模块化
- live reload

大多数库都是开源的，源码都能获取到，所以库不是难题。

ES6 支持模块化，仅需要在 script 标签开启 type="module".

live reload，我则选择了使用 live.js 库，然后配置 python 开启本地服务。

```shell
python3 -m http.server 3000
```

所以这个就是我原生的方案啦！

后续有问题还会继续更新完善！



