# CSMA/CD

## 简介

载波监听检测/碰撞

CSMA/CD是一种争用型的[介质访问控制](https://baike.baidu.com/item/介质访问控制)协议

CSMA/CD应用在 OSI 的第二层[数据链路层](https://baike.baidu.com/item/数据链路层) 

它的工作原理是: 发送数据前 先侦听信道是否空闲  ,若空闲，则立即发送数据。若信道忙碌，则等待一段时间至信道中的信息传输结束后再发送数据；若在上一段信息发送结束后，同时有两个或两个以上的节点都提出发送请求，则判定为冲突。若侦听到冲突,则立即停止发送数据，等待一段随机时间,再重新尝试。 

其原理简单总结为：先听后发，边发边听，冲突停发，随机延迟后重发 

CSMA/CD采用[IEEE 802.3](https://baike.baidu.com/item/IEEE 802.3)标准。 

它的主要目的是：提供寻址和媒体存取的控制方式，使得不同设备或网络上的[节点](https://baike.baidu.com/item/节点)可以在多点的网络上通信而不相互冲突。

## 特点

- 使用 CSMA/CD 协议的以太网不能进行全双工通信而只能进行双向交替通信（半双工通信）。

- 每个站在发送数据之后的一小段时间内，存在着遭遇碰撞的可能性。

- 这种发送的不确定性使整个以太网的平均通信量远小于以太网的最高数据率。

## 发生冲突碰撞的情况

![img](C:\Users\tel13\notes\network\asset\1233571-20190104154209643-222433894.png)

## 专业名词

### 争用期

最先发送数据帧的站，在发送数据帧后至多经过时间 2Tp（两倍的端到端往返时延）就可知道发送的数据帧是否遭受了碰撞。以太网的端到端往返时延 2Tp称为争用期，或碰撞窗口。 经过争用期这段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞。

### 争用期长度

以太网取 51.2 微秒为争用期的长度。

对于 10 Mb/s 以太网，在争用期内可发送512 bit，即 64 字节。

以太网在发送数据时，若前 64 字节没有发生冲突，则后续的数据就不会发生冲突。

### 最短有效帧长

如果发生冲突，就一定是在发送的前 64 字节之内。

由于一检测到冲突就立即中止发送，这时已经发送出去的数据一定小于 64 字节。

以太网规定了最短有效帧长为 64 字节，凡长度小于 64 字节的帧都是由于冲突而异常中止的无效帧。

### 最短帧长深度理解

为了实现CSMA/CD,需要限定帧的长度。在发送帧的最后一位前，发送站点必须检测冲突，如有任何冲突都要放弃传输。这是因为一旦整个帧被被发送了，站点就无法保留帧的副本并无法掌控线路中的冲突检测。因此，帧的传输时间Tfr必须至少是最长传播时间Tp的2倍。