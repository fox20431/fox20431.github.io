---
title: "锁（计算机科学）"
excerpt: "又是一个屌打面试官必备的知识？难搞哦，妥妥的八股文，整理一下！"
---

# 锁

## 乐观锁和悲观锁

### 乐观锁

乐观认为并发时的数据不会发生竞争问题，取数据不加锁，而是在更新数据时检查数据是否被其他线程修改过。

**优点**

减少了加锁的开销和冲突，提高了并发性能。

**缺点**

可能会导致大量的重试操作，浪费了资源和时间。

**使用常见**

读多写少。

### 悲观锁

悲观认为并发时的数据一定会发生竞争问题，所以取数据时会加锁。

## 独享锁和共享锁

### 独享锁

只能被一个线程持有。


### 共享锁

可以被多个线程同时持有，通常会有一定限制。例如ReentrantReadWriteLock中的读锁可以被多线程共享，但是写锁只能被一个线程独占。

## 公平锁和非公平锁

### 公平锁

多线程按照申请顺序来获取锁，不会出现争抢的情况。

### 非公平锁

多线程不会按照顺序获取锁，会先尝试争抢锁。

## 互斥锁和读写锁

### 互斥锁

同一时间只允许一个线程对共享资源访问，无论读还是写。

### 读写锁

同一时间可以允许多个线程对共享资源进行读操作，但只允许一个线程进行写操作。

## 可重入锁

也叫递归锁，是一种同步机制，它允许同一个线程在已经获取到锁的情况下，再次获取该锁。

## 分段锁

分段锁是一种锁的设计，它可以将一个大的数据结构分成多个小的部分，每个部分有自己的锁，这样可以减少锁竞争，提高并发性能。

## 销升锁

计算机中的销升锁是一种锁机制，它可以保证在多核多线程环境中，在某一个时间点上，只能有一个线程进入临界区代码，从而保证临界区中操作数据的一致性。

## 死锁

死锁是指两个或两个以上的进程在执行过程中，由于竞争资源或者由于彼此通信而造成的一种阻塞的现象，若无外力作用，它们都将无法推进下去。

死锁的产生需要满足以下四个必要条件：

- 互斥：一个资源每次只能被一个进程使用。
- 占有并等待：一个进程因请求资源而阻塞时，对已获得的资源保持不放。
- 不可抢占：进程已获得的资源，在未使用完之前，不能强行剥夺。
- 循环等待：若干进程之间形成一种头尾相接的循环等待资源关系。