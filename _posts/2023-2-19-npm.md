# NPM

## CLI

```sh
npm install <package>
npm outdated         # 先查询有哪些包有更新
npm update <package> # 更新指定包
npm install -g npm-check # 先全局安装 npm-check
npm-check -u             # 查询当前项目下的包更新
npm-check -u -g          # 查询全局安装的包更新
```

## Config

预先准备：

```shell
# 设置代理（默认使用终端的全局代理http_proxy和https_proxy）
npm config set proxy http://server:port
npm config set https-proxy http://server:port
# 需认证的代理
npm config set proxy http://username:password@server:port
npm config set https-proxy http://username:pawword@server:port
# 取消代理
npm config delete proxy
npm config delete https-proxy
# 关闭ssl检查
npm config set strict-ssl false
# 查看换源
npm config get registry
# 换淘宝源
npm config set registry https://registry.npm.taobao.org
# 还原npm源
npm config set registry https://registry.npmjs.org
```

具体官方配置可看https://docs.npmjs.com/cli/v6/using-npm/config#maxsockets

再限制sockets数量（好像代理限制sockets数量，如果超过一部分将不走代理）

```shell
npm config set maxsockets 1
```

.npmrc代理设置：

```
strict-ssl=false
proxy=http://127.0.0.1:8118/
https-proxy=http://127.0.0.1:8118/
registry=https://registry.npmjs.com/
```

## Package

NPM的项目会包含 `package.json` 配置文件。


```json
{
  "name": "project name",
  "version": "0.0.0",
  "scripts": {
	// ...
  },
  "private": true,
  "dependencies": {
	// ...
  },
  "devDependencies": {
	// for example
    "typescript": "~4.8.2"
	// ...
  }
}
```


`^` 表示：匹配最近的一个大版本比如1.0.2 将会匹配到1.x.x，但不包括2.x.x
`~` 表示：匹配最近的小版本比如~1.0.2将会匹配1.0.x版本，但不匹配1.1.0